(this["webpackJsonpunity-solana-react-web3"]=this["webpackJsonpunity-solana-react-web3"]||[]).push([[0],{253:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var a=n(20),r=n(2),c=n(1),o=n.n(c),u=n(48),i=n(79),s=n(255),l=n(77),d=n(256),b=n.n(d),f=(new u.b.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),new u.b.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"));function p(e){return m.apply(this,arguments)}function m(){return(m=Object(r.a)(o.a.mark((function t(n){var r,c,d,p,m,g,j,x,v,y,h,w;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,i.a.getParsedTokenAccountsByOwner(n,{programId:l.TOKEN_PROGRAM_ID});case 3:c=t.sent,d=0;case 5:if(!(d<c.value.length)){t.next=36;break}if(p=c.value[d],m=p.account.data.parsed.info.tokenAmount,console.log(p.account.data.parsed.info),"1"!=m.amount||"0"!=m.decimals){t.next=32;break}return t.prev=10,t.next=13,u.b.PublicKey.findProgramAddress([e.from("metadata"),f.toBuffer(),new u.b.PublicKey(p.account.data.parsed.info.mint).toBuffer()],f);case 13:return g=t.sent,j=Object(a.a)(g,1),x=j[0],t.next=18,i.a.getParsedAccountInfo(x);case 18:return v=t.sent,y=new s.Metadata(n.toString(),v.value),t.next=22,b.a.get(y.data.data.uri);case 22:if(h=t.sent,"CyberGothica"==(w=h.data).collection.family){t.next=26;break}return t.abrupt("continue",33);case 26:r.push({Address:p.account.data.parsed.info.mint,Name:w.name,ImageUrl:w.image,Image:null}),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(10),console.log(t.t0.toString());case 32:r.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}));case 33:d++,t.next=5;break;case 36:return t.abrupt("return",r);case 37:case"end":return t.stop()}}),t,null,[[10,29]])})))).apply(this,arguments)}}).call(this,n(7).Buffer)},276:function(e,t){},278:function(e,t){},289:function(e,t){},290:function(e,t){},358:function(e,t){},360:function(e,t){},371:function(e,t){},379:function(e,t){},381:function(e,t){},408:function(e,t){},410:function(e,t){},416:function(e,t){},428:function(e,t){},431:function(e,t){},439:function(e,t){},480:function(e,t,n){"use strict";n.r(t);var a=n(44),r=n(239),c=n.n(r),o=n(2),u=n(20),i=n(1),s=n.n(i),l=n(154),d=n.n(l),b=n(93),f=n(253),p=n(79),m=new(n(3).PublicKey)("9bPoFPCwGCVGDMC5gvzisPdjgKC6tRLRDhirJvcktgVh"),g=function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getParsedTokenAccountsByOwner(t,{mint:m});case 2:if(n=e.sent,console.log(n),n&&void 0!==n){e.next=6;break}return e.abrupt("return",0);case 6:if(n.value&&void 0!==n.value&&0!==n.value.length){e.next=8;break}return e.abrupt("return",0);case 8:if(n.value[0]&&void 0!==n.value[0]){e.next=10;break}return e.abrupt("return",0);case 10:if(n.value[0].account&&void 0!==n.value[0].account){e.next=12;break}return e.abrupt("return",0);case 12:return e.abrupt("return",n.value[0].account.data.parsed.info.tokenAmount.uiAmount);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=n(26),x=new l.UnityContext({loaderUrl:"Build/cg-build.loader.js",dataUrl:"Build/cg-build.data",frameworkUrl:"Build/cg-build.framework.js",codeUrl:"Build/cg-build.wasm",webglContextAttributes:{preserveDrawingBuffer:!0}}),v=function(){var e,t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){return x.on("ConnectWallet",Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);case 1:case"end":return e.stop()}}),e)})))),x.on("progress",(function(e){var t=document.getElementById("#unity-loading-bar"),n=document.getElementById("#unity-progress-bar-full");null!==t&&null!==n&&(t.style.display="block",n.style.width=100*e+"%",e>=1&&(t.style.display="none"))})),x.on("RegisterNewNft",(function(e,t){console.log(e),console.log(t);var n=new XMLHttpRequest;n.open("POST","https://cyber-gothica-leaderboard.herokuapp.com/register"),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){4===n.readyState&&(console.log(n.status),console.log(n.responseText))};var a='{"token_address": "'.concat(e,'", "character_name": "').concat(t,'"}');n.send(a)})),function(){x.removeEventListener("progress")}}),[]);var i=function(){var t=Object(o.a)(s.a.mark((function t(n){var a,r,o,u,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n&&void 0!=n){t.next=3;break}return console.log("Wallet not found!"),t.abrupt("return");case 3:return a=n.adapter(),t.next=6,a.connect();case 6:if(null===(e=a).publicKey){t.next=18;break}return x.send("UserWallet","ReceiveWalletInfo",e.publicKey.toString()),t.next=11,g(e.publicKey);case 11:return r=t.sent,x.send("UserWallet","SetSpiritAmount",r),c(!1),t.next=16,Object(f.a)(e.publicKey);case 16:for(o=t.sent,u=0;u<o.length;u++)i=JSON.stringify(o[u]),x.send("UserWallet","ReceiveNft",i);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[r?Object(j.jsx)("div",{id:"wallet-connector",children:Object(j.jsxs)("div",{id:"wallet-adapters-holder",children:[Object(j.jsx)("div",{id:"wallet-adapters-title",children:"SELECT WALLET"}),Object(j.jsxs)("div",{id:"wallet-adapters-list",children:[Object(j.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return i(Object(b.a)())},children:"Phantom"}),Object(j.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return i(Object(b.b)())},children:"Slope"}),Object(j.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return i(Object(b.c)())},children:"Solflare"}),Object(j.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return i(Object(b.d)())},children:"Sollet"})]})]})}):null,Object(j.jsx)(d.a,{devicePixelRatio:1,unityContext:x,className:"unity-canvas"}),Object(j.jsxs)("div",{id:"unity-loading-bar",children:[Object(j.jsx)("img",{id:"game-logo",src:"logo.png"}),Object(j.jsx)("div",{id:"unity-progress-bar-empty",children:Object(j.jsx)("div",{id:"unity-progress-bar-full"})})]})]})};c.a.render(Object(j.jsx)(a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("unity-container"))},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(48),r=new a.b.Connection("https://api.mainnet-beta.solana.com");new a.b.PublicKey("GQbMuYSbcXWTpGmtx7KMiroVHN3EbhxnPLC7X2eRDzoB")}},[[480,1,2]]]);
//# sourceMappingURL=main.b801eba4.chunk.js.map