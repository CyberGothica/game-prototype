(this["webpackJsonpunity-solana-react-web3"]=this["webpackJsonpunity-solana-react-web3"]||[]).push([[0],{255:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var a=n(20),r=n(2),c=n(1),o=n.n(c),i=n(41),u=n(36),s=n(160),l=n(78),d=n(161),b=n.n(d);function f(e,t){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(o.a.mark((function t(n,r){var c,d,f,p,j,g,v,m,x,y,h,w;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.getParsedTokenAccountsByOwner(r,{programId:l.TOKEN_PROGRAM_ID});case 2:c=t.sent,d=0;case 4:if(!(d<c.value.length)){t.next=35;break}if(f=c.value[d],p=f.account.data.parsed.info.tokenAmount,console.log(f.account.data.parsed.info),"1"!=p.amount||"0"!=p.decimals){t.next=32;break}return t.prev=9,t.next=12,i.b.PublicKey.findProgramAddress([e.from("metadata"),u.c.toBuffer(),new i.b.PublicKey(f.account.data.parsed.info.mint).toBuffer()],u.c);case 12:return j=t.sent,g=Object(a.a)(j,1),v=g[0],t.next=17,u.a.getParsedAccountInfo(v);case 17:return m=t.sent,x=new s.Metadata(r.toString(),m.value),t.next=21,b.a.get(x.data.data.uri);case 21:if(y=t.sent,"CyberGothica"==(h=y.data).collection.family){t.next=25;break}return t.abrupt("continue",32);case 25:w=JSON.stringify({Address:f.account.data.parsed.info.mint,Name:h.name,ImageUrl:h.image,Image:null}),n.send("UserWallet","ReceiveNft",w),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(9),console.log(t.t0.toString());case 32:d++,t.next=4;break;case 35:case"end":return t.stop()}}),t,null,[[9,29]])})))).apply(this,arguments)}}).call(this,n(7).Buffer)},276:function(e,t){},278:function(e,t){},289:function(e,t){},290:function(e,t){},358:function(e,t){},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o}));var a=n(41),r=new a.b.Connection("https://api.mainnet-beta.solana.com"),c=(new a.b.PublicKey("GQbMuYSbcXWTpGmtx7KMiroVHN3EbhxnPLC7X2eRDzoB"),new a.b.PublicKey("9bPoFPCwGCVGDMC5gvzisPdjgKC6tRLRDhirJvcktgVh")),o=new a.b.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s")},360:function(e,t){},371:function(e,t){},379:function(e,t){},381:function(e,t){},408:function(e,t){},410:function(e,t){},416:function(e,t){},428:function(e,t){},431:function(e,t){},439:function(e,t){},480:function(e,t,n){"use strict";n.r(t);var a=n(46),r=n(241),c=n.n(r),o=n(2),i=n(20),u=n(1),s=n.n(u),l=n(154),d=n.n(l),b=n(93),f=n(255),p=n(36),j=function(){var e=Object(o.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getParsedTokenAccountsByOwner(t,{mint:n});case 2:if((a=e.sent)&&void 0!==a){e.next=5;break}return e.abrupt("return",0);case 5:if(a.value&&void 0!==a.value&&0!==a.value.length){e.next=7;break}return e.abrupt("return",0);case 7:if(a.value[0]&&void 0!==a.value[0]){e.next=9;break}return e.abrupt("return",0);case 9:if(a.value[0].account&&void 0!==a.value[0].account){e.next=11;break}return e.abrupt("return",0);case 11:return e.abrupt("return",a.value[0].account.data.parsed.info.tokenAmount.uiAmount);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=n(26),v=new l.UnityContext({loaderUrl:"Build/cg-build.loader.js",dataUrl:"Build/cg-build.data",frameworkUrl:"Build/cg-build.framework.js",codeUrl:"Build/cg-build.wasm",webglContextAttributes:{preserveDrawingBuffer:!0}}),m=function(){var e,t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){return v.on("ConnectWallet",Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);case 1:case"end":return e.stop()}}),e)})))),v.on("progress",(function(e){var t=document.getElementById("#unity-loading-bar"),n=document.getElementById("#unity-progress-bar-full");null!==t&&null!==n&&(t.style.display="block",n.style.width=100*e+"%",e>=1&&(t.style.display="none"))})),v.on("RegisterNewNft",(function(e,t){console.log(e),console.log(t);var n=new XMLHttpRequest;n.open("POST","https://cyber-gothica-leaderboard.herokuapp.com/register"),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){4===n.readyState&&(console.log(n.status),console.log(n.responseText))};var a='{"token_address": "'.concat(e,'", "character_name": "').concat(t,'"}');n.send(a)})),function(){v.removeEventListener("progress")}}),[]);var u=function(){var t=Object(o.a)(s.a.mark((function t(n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n&&void 0!=n){t.next=3;break}return console.log("Wallet not found!"),t.abrupt("return");case 3:return a=n.adapter(),t.next=6,a.connect();case 6:if(null===(e=a).publicKey){t.next=15;break}return v.send("UserWallet","ReceiveWalletInfo",e.publicKey.toString()),t.next=11,j(e.publicKey,p.b);case 11:r=t.sent,v.send("UserWallet","SetSpiritAmount",r),c(!1),Object(f.a)(v,e.publicKey);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[r?Object(g.jsx)("div",{id:"wallet-connector",children:Object(g.jsxs)("div",{id:"wallet-adapters-holder",children:[Object(g.jsx)("div",{id:"wallet-adapters-title",children:"SELECT WALLET"}),Object(g.jsxs)("div",{id:"wallet-adapters-list",children:[Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return u(Object(b.a)())},children:"Phantom"}),Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return u(Object(b.b)())},children:"Slope"}),Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return u(Object(b.c)())},children:"Solflare"}),Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return u(Object(b.d)())},children:"Sollet"})]})]})}):null,Object(g.jsx)(d.a,{devicePixelRatio:1,unityContext:v,className:"unity-canvas"}),Object(g.jsxs)("div",{id:"unity-loading-bar",children:[Object(g.jsx)("img",{id:"game-logo",src:"logo.png"}),Object(g.jsx)("div",{id:"unity-progress-bar-empty",children:Object(g.jsx)("div",{id:"unity-progress-bar-full"})})]})]})};c.a.render(Object(g.jsx)(a.StrictMode,{children:Object(g.jsx)(m,{})}),document.getElementById("unity-container"))}},[[480,1,2]]]);
//# sourceMappingURL=main.0c51f1fb.chunk.js.map