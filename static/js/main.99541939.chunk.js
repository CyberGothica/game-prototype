(this["webpackJsonpunity-solana-react-web3"]=this["webpackJsonpunity-solana-react-web3"]||[]).push([[0],{253:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var a=n(20),r=n(2),c=n(1),o=n.n(c),i=n(48),s=n(69),u=n(255),l=n(78),d=n(256),b=n.n(d),f=(new i.b.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),new i.b.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"));function p(e){return m.apply(this,arguments)}function m(){return(m=Object(r.a)(o.a.mark((function t(n){var r,c,d,p,m,j,g,x,y,h,v,w;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,s.a.getParsedTokenAccountsByOwner(n,{programId:l.TOKEN_PROGRAM_ID});case 3:c=t.sent,d=0;case 5:if(!(d<c.value.length)){t.next=35;break}if(p=c.value[d],"1"!=(m=p.account.data.parsed.info.tokenAmount).amount||"0"!=m.decimals||p.account.data.parsed.info.owner!=s.b){t.next=31;break}return t.prev=9,t.next=12,i.b.PublicKey.findProgramAddress([e.from("metadata"),f.toBuffer(),new i.b.PublicKey(p.account.data.parsed.info.mint).toBuffer()],f);case 12:return j=t.sent,g=Object(a.a)(j,1),x=g[0],t.next=17,s.a.getParsedAccountInfo(x);case 17:return y=t.sent,h=new u.Metadata(n.toString(),y.value),t.next=21,b.a.get(h.data.data.uri);case 21:if(v=t.sent,"CyberGothica"==(w=v.data).collection.family){t.next=25;break}return t.abrupt("continue",32);case 25:r.push({Address:p.account.data.parsed.info.mint,Name:w.name,ImageUrl:w.image,Image:null}),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(9),console.log(t.t0.toString());case 31:r.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}));case 32:d++,t.next=5;break;case 35:return t.abrupt("return",r);case 36:case"end":return t.stop()}}),t,null,[[9,28]])})))).apply(this,arguments)}}).call(this,n(7).Buffer)},276:function(e,t){},278:function(e,t){},289:function(e,t){},290:function(e,t){},358:function(e,t){},360:function(e,t){},371:function(e,t){},379:function(e,t){},381:function(e,t){},408:function(e,t){},410:function(e,t){},416:function(e,t){},428:function(e,t){},431:function(e,t){},439:function(e,t){},480:function(e,t,n){"use strict";n.r(t);var a=n(44),r=n(239),c=n.n(r),o=n(2),i=n(20),s=n(1),u=n.n(s),l=n(154),d=n.n(l),b=n(93),f=n(253),p=n(69),m=new(n(3).PublicKey)("9bPoFPCwGCVGDMC5gvzisPdjgKC6tRLRDhirJvcktgVh"),j=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getParsedTokenAccountsByOwner(t,{mint:m});case 2:return n=e.sent,e.abrupt("return",n.value[0].account.data.parsed.info.tokenAmount.uiAmount);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=n(26),x=new l.UnityContext({loaderUrl:"Build/cg-build.loader.js",dataUrl:"Build/cg-build.data",frameworkUrl:"Build/cg-build.framework.js",codeUrl:"Build/cg-build.wasm",webglContextAttributes:{preserveDrawingBuffer:!0}}),y=function(){var e,t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){return x.on("ConnectWallet",Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);case 1:case"end":return e.stop()}}),e)})))),x.on("progress",(function(e){var t=document.getElementById("#unity-loading-bar"),n=document.getElementById("#unity-progress-bar-full");null!==t&&null!==n&&(t.style.display="block",n.style.width=100*e+"%",e>=1&&(t.style.display="none"))})),x.on("RegisterNewNft",(function(e,t){console.log(e),console.log(t);var n=new XMLHttpRequest;n.open("POST","https://cyber-gothica-leaderboard.herokuapp.com/register"),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){4===n.readyState&&(console.log(n.status),console.log(n.responseText))};var a='{"token_address": "'.concat(e,'", "character_name": "').concat(t,'"}');n.send(a)})),function(){x.removeEventListener("progress")}}),[]);var s=function(){var t=Object(o.a)(u.a.mark((function t(n){var a,r,o,i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n&&void 0!=n){t.next=3;break}return console.log("Wallet not found!"),t.abrupt("return");case 3:return a=n.adapter(),t.next=6,a.connect();case 6:if(null===(e=a).publicKey){t.next=18;break}return x.send("UserWallet","ReceiveWalletInfo",e.publicKey.toString()),t.next=11,j(e.publicKey);case 11:return r=t.sent,x.send("UserWallet","SetSpiritAmount",r),c(!1),t.next=16,Object(f.a)(e.publicKey);case 16:for(o=t.sent,i=0;i<o.length;i++)s=JSON.stringify(o[i]),x.send("UserWallet","ReceiveNft",s);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[r?Object(g.jsx)("div",{id:"wallet-connector",children:Object(g.jsxs)("div",{id:"wallet-adapters-holder",children:[Object(g.jsx)("div",{id:"wallet-adapters-title",children:"SELECT WALLET"}),Object(g.jsxs)("div",{id:"wallet-adapters-list",children:[Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return s(Object(b.a)())},children:"Phantom"}),Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return s(Object(b.b)())},children:"Slope"}),Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return s(Object(b.c)())},children:"Solflare"}),Object(g.jsx)("button",{className:"wallet-adapters-list-button",onClick:function(){return s(Object(b.d)())},children:"Sollet"})]})]})}):null,Object(g.jsx)(d.a,{devicePixelRatio:1,unityContext:x,className:"unity-canvas"}),Object(g.jsxs)("div",{id:"unity-loading-bar",children:[Object(g.jsx)("img",{id:"game-logo",src:"logo.png"}),Object(g.jsx)("div",{id:"unity-progress-bar-empty",children:Object(g.jsx)("div",{id:"unity-progress-bar-full"})})]})]})};c.a.render(Object(g.jsx)(a.StrictMode,{children:Object(g.jsx)(y,{})}),document.getElementById("unity-container"))},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(48),r=new a.b.Connection("https://api.mainnet-beta.solana.com"),c=new a.b.PublicKey("GQbMuYSbcXWTpGmtx7KMiroVHN3EbhxnPLC7X2eRDzoB")}},[[480,1,2]]]);
//# sourceMappingURL=main.99541939.chunk.js.map